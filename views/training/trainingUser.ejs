<!doctype html>
<html lang="en">
  <head>
    <title>Richrova</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="icon" href="/images/logo/logo.png" type="image/gif" sizes="32x32">

    <!-- local and remote css/js -->
    <link href="/user/user.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>

  .navbar-toggler {
    border: none;
  }

  .navbar-toggler .navbar-toggler-icon {
    width: 1.6rem;
    height: 1.2rem;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke='%23f4f6f8' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/></svg>");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
  }

  /* optional: improve focus visibility of toggler for keyboard users */
  .navbar-toggler:focus {
    outline: 3px solid rgba(32,228,127,0.14);
    outline-offset: 3px;
    box-shadow: none;
  }

  /* ensure nav links remain light on dark background */
  #topnav .nav-link,
  #topnav .navbar-brand img {
    color: #f4f6f8 !important;
  }

  /* remove default blue focus for bootstrap links and make it subtle */
  #topnav .nav-link:focus {
    outline: 3px solid rgba(32,228,127,0.12);
    outline-offset: 3px;
  }


      :root{
        --bg: #062b2b;
        --panel: #0f3a3a;
        --accent: #20e47f;
        --muted: #cfdcd9;
        --card: rgba(255,255,255,0.03);
        --glass: rgba(255,255,255,0.02);
        --brand: #ffd166;

          --tree-line: rgba(255,255,255,0.10); /* connector color (light) */
  --node-bg: rgba(255,255,255,0.02);
  --node-border: rgba(255,255,255,0.06);
  --verified-bg-start: #fff8dd;
  --verified-bg-end:   #ffd43a;
      }

      html,body{
        height:100%;
        margin:0;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        background: linear-gradient(180deg, #041b1b 0%, #083737 100%);
        color: #eef4ef;
        -webkit-font-smoothing:antialiased;
      }

      /* NAV */
      nav.navbar {
        background: linear-gradient(90deg,#041b2b 0%, #073939 100%);
        border-bottom: 1px solid rgba(255,255,255,0.04);
      }
      .navbar-brand img { height:38px; }
      .nav-link { color: #e6f5f2 !important; }
      .nav-link:hover{ color: var(--accent) !important; }
      .btn-outline-light { color: #f5fbfa; border-color: rgba(255,255,255,0.06); }

      .container-fluid, .container { max-width:1100px; }

      /* cards */
      .card.custom {
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border: 1px solid rgba(255,255,255,0.04);
        color: #f3fbf9;
        border-radius: 10px;
      }
      .card.custom .card-body { padding:1rem 1rem; }

      /* hero / top */
      header { padding-top:72px; padding-bottom:24px; }
      .lead { color: #dfeff0; }

      /* form controls */
      .form-control {
        background: transparent;
        color: #eef7f6;
        border: 1px solid rgba(255,255,255,0.06);
      }
      .form-control::placeholder { color: rgba(255,255,255,0.5); }
      .input-group .form-control { border-left: 0; }

      /* password toggle (eye is dark) */
      .pw-toggle {
        cursor:pointer;
        color: rgba(255,255,255,0.6);
        display:flex;
        align-items:center;
        justify-content:center;
      }
      /* dark colored eye glyph */
      .pw-toggle i { color: #222 !important; font-size:1.05rem; }

      .pw-toggle:hover i { color: var(--accent) !important; }

      /* tree */
/* Binary genealogy tree layout + node styles */
/* Genealogy tree â€” modern, animated, responsive */
.tree-wrapper {
width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding: 12px 20px;           /* <-- increased horizontal padding */
  display: flex;
  justify-content: center;
  box-sizing: border-box;
}

/* core tree layout */
.tree {
   display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
  transform-origin: top center;
  transition: transform 240ms ease;
  min-width: max-content; 
  padding-left: 200px;
}

/* top-level children (horizontal row) */
.tree > ul {
   display: flex;
  gap: 36px;
  margin: 0;
  padding: 0;
  list-style: none;
  align-items: flex-start;
  min-width: max-content; 
}

/* grandchildren rows */
.tree ul ul {
  display: flex;
  gap: 18px;
  margin: 0;
  padding-top: 18px;
  list-style: none;
  position: relative;
  min-width: max-content;
}

/* LI wrapper */
.tree li {
  list-style: none;
  position: relative;
  text-align: center;
  min-width: 120px;
  padding-top: 8px; /* space for connectors */
}

/* --- CONNECTORS: only render when node has children (JS sets .has-children) --- */
/* horizontal connectors from parent to children */
.tree li.has-children::before,
.tree li.has-children::after {
  content: "";
  position: absolute;
  top: -12px;
  width: 50%;
  height: 12px;
  border-top: 1.5px solid var(--tree-line);
  transition: border-color .18s ease, opacity .18s ease;
  opacity: 1;
  box-sizing: border-box;
  
}
.tree li.has-children::before { right: 50%; }
.tree li.has-children::after  { left: 50%; }

/* hide connectors for single-child parent (avoid stray half-line) */
.tree li:only-child.has-children::before,
.tree li:only-child.has-children::after { display: none; }

/* vertical connector down to nested UL (children row) */
.tree ul ul::before {
  content: "";
  position: absolute;
  top: -28px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 1.5px solid var(--tree-line);
  height: 28px;
  transition: border-color .18s ease, opacity .18s ease;
  opacity: 1;
  box-sizing: border-box;
}

/* if nested UL is empty, hide vertical */
.tree ul ul:empty::before { display: none; }

/* slight highlight on hover for connectors */
.tree li.has-children:hover::before,
.tree li.has-children:hover::after,
.tree li.has-children:hover ul::before {
  border-color: rgba(255,255,255,0.16);
}

/* Node boxes */
.tree .node {
  display: inline-block;
  padding: 10px 10px;
  border-radius: 10px;
  min-width: 120px;
  box-sizing: border-box;
  cursor: pointer;
  font-weight: 600;
  user-select: none;
  border: 2px solid var(--node-border);
  background: var(--node-bg);
  color: #eef5ef;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
  text-align: center;
  line-height: 1.1;
  position: relative;
  overflow: hidden;
  outline: none;
}

/* subtle pop-in when class "pop" applied */
@keyframes popIn {
  from { transform: translateY(8px) scale(.98); opacity: 0; }
  to   { transform: translateY(0)    scale(1);    opacity: 1; }
}
.tree .node.pop { animation: popIn .36s cubic-bezier(.2,.9,.2,1) both; }

/* hover / active */
.tree .node:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 12px 30px rgba(2,8,8,0.55); }
.tree .node:active { transform: translateY(-2px) scale(.995); }

/* Verified (gold) */
.tree .node.verified {
  background: linear-gradient(180deg, var(--verified-bg-start), var(--verified-bg-end));
  color: #111;
  border-color: #e6c200;
  box-shadow: 0 10px 26px rgba(230,194,0,0.12);
}

/* Not verified (muted) */
.tree .node.not-verified {
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  color: #eaf6f3;
  border-color: var(--node-border);
}

/* Placeholder / empty nodes */
.tree .node.empty {
  background: rgba(255,255,255,0.01);
  border: 2px dashed rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.45);
  font-weight: 500;
}

/* compact text inside node */
.node .uid { display:block; font-size: .98rem; font-weight:700; color: inherit; }
.node .name { display:block; font-size: .85rem; color: rgba(0,0,0,0.65); margin-top:6px; }

/* focus accessibility */
.node:focus { outline: 3px solid rgba(32,228,127,0.14); outline-offset: 3px; }

/* small-screen adjustments */
@media (max-width: 880px) {
 .tree-wrapper { padding: 12px 14px; } /* slightly smaller padding on small screens */
  .tree ul { gap: 14px; }
  .tree ul ul { gap: 10px; padding-top: 12px; }
  .tree .node { min-width: 86px; padding: 8px 6px; font-size: 13px; border-radius: 8px; }
  .node .uid { font-size: .88rem; }
  .node .name { font-size: .72rem; }
  .tree, .tree > ul, .tree ul ul { min-width: max-content; }
  /* slightly thinner connectors on small screens */
  .tree li.has-children::before,
  .tree li.has-children::after { height: 10px; top: -10px; border-top-width: 1px; }
  .tree ul ul::before { height: 20px; top: -20px; border-left-width: 1px; }
}



      /* responsive tweaks */
      @media (max-width: 767.98px) {
        .navbar .nav-link { padding: .4rem .6rem; }
        .fixed-bottom { position: fixed; bottom: 0; left: 0; right: 0; }
        .card.custom { border-radius: 8px; }
      }

      /* utility */
      .muted-small { color: rgba(255,255,255,0.62); font-size: .92rem; }
      .accent-text { color: var(--accent); }
      .hidden { display:none !important; }

      /* waiting overlays */
      #waitingPage, #waitingGif { display:none; }
    </style>
  </head>

  <body>

    <!-- Waiting overlay (existing) -->
    <div id="waitingPage" style="position: fixed; display: none; inset:0; z-index:1050; background-color: rgba(0,0,0,0.4);">
      <div style="height:100%; display:flex; align-items:center; justify-content:center;">
        <img style="height: 12vh;" src="/images/gif/progress.gif" alt="loading">
      </div>
    </div>

    <!-- hidden server-provided values -->
    <input type="hidden" id="allredyloginuserID" value="<%=allredylogin%>">
    <input type="hidden" id="sponsID" value="<%=sponsID%>">
    <input type="hidden" id="sponsSide" value="<%=sponsSide%>">

    <!-- header / navbar -->
    <header>
     <nav id="topnav" class="navbar fixed-top navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><img src="/images/logo/logo.png" alt="Logo" style="height:38px;"></a>

          <button class="navbar-toggler btn btn-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon" aria-hidden="true"></span>
          </button>

          <div class="collapse navbar-collapse" id="navMenu">
            <ul class="navbar-nav ms-auto align-items-lg-center">
              <li class="nav-item"><a class="nav-link" href="#view">Home</a></li>
              <li onclick="logout()" class="nav-item"><a class="nav-link">Logout</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- top background spacer -->
    <div id="topBackground" style="height: 12vh; display: none;"></div>

    <!-- main view container -->
    <div id="view" class="container-fluid" style="margin-top: 1rem; color:#eef4ef;">
      <!-- content injected by JS -->
    </div>

    <!-- secondary view overlay -->
    <div id="view1" style="display:none; margin-top: 7vh; margin-bottom: 8vh; background: linear-gradient(180deg,#0b3b3b,#083233); padding: 1rem; border-radius:10px;">
    </div>

    <!-- waiting GIF overlay (existing) -->
    <div id="waitingGif" style="position: fixed; z-index: 1060; inset:0; display:none; background-color: rgba(0,0,0,0.45);">
      <div style="height:100%; display:flex; align-items:center; justify-content:center;">
        <img style="width: 110px;" src="/images/gif/circle.gif" alt="loading">
      </div>
    </div>

    <!-- footer nav (hidden by default as earlier) -->
    <footer>
      <nav id="footnav" class="navbar fixed-bottom bg-transparent" style="display:none;">
        <div id="footerBody" class="container-fluid"></div>
      </nav>
    </footer>

    <!-- Bootstrap & utilities -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <!-- main script (external) -->
    <script src="/training/trainingScrpt.js"></script>
  </body>
</html>
